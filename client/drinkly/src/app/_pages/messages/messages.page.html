<ion-header>
  <ion-toolbar>
    <ion-title>messages</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content padding>
    <div *ngIf="chats && chats.length == 0">
        <ion-label padding>{{'no_messages' | translate }}</ion-label>
    </div>
    <ion-list *ngIf="!chats">
        <ion-item>
          <ion-avatar class="user-message-img" slot="start">
            <ion-skeleton-text></ion-skeleton-text>
          </ion-avatar>
          <ion-label>
            <ion-skeleton-text animated style="width: 70%; height: 17px;"></ion-skeleton-text>
            <ion-skeleton-text animated style="width: 40%;"></ion-skeleton-text>
          </ion-label>
        </ion-item>
        <ion-item>
          <ion-avatar class="user-message-img" slot="start">
            <ion-skeleton-text></ion-skeleton-text>
          </ion-avatar>
          <ion-label>
            <ion-skeleton-text animated style="width: 70%; height: 17px;"></ion-skeleton-text>
            <ion-skeleton-text animated style="width: 40%;"></ion-skeleton-text>
          </ion-label>
        </ion-item>        <ion-item>
          <ion-avatar class="user-message-img" slot="start">
            <ion-skeleton-text></ion-skeleton-text>
          </ion-avatar>
          <ion-label>
            <ion-skeleton-text animated style="width: 70%; height: 17px;"></ion-skeleton-text>
            <ion-skeleton-text animated style="width: 40%;"></ion-skeleton-text>
          </ion-label>
        </ion-item>
      </ion-list>
    <ion-list *ngIf="chats && chats.length > 0">
        <ion-item *ngFor="let chat of chats" (click)="goToChat(chat, $event)">
          <ion-avatar id="chat-img-{{chat.id}}" class="user-message-img user-message-img-show" slot="start">
            <img 
            onError="this.src='../../assets/imgs/user.svg';"             
            [src]="chat.img">
          </ion-avatar>
          <ion-label class="chat-name">
            <h3>{{chat.name}}</h3>
            <p *ngIf="chat.lastMessage" [class.notReadMessage]="chat.lastMessage.readBy.indexOf(user?.id) == -1">{{chat.lastMessage.content}}</p>
          </ion-label>
          <div class="not-read-checker" *ngIf="chat.lastMessage.readBy.indexOf(user?.id) == -1">&bull;</div>
        </ion-item>
      </ion-list>

</ion-content>
