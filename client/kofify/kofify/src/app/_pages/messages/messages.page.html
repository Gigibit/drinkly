<ion-header>
  <ion-toolbar>
    <ion-title>messages</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">
    <div *ngIf="chats && chats.length == 0">
        <ion-label padding>{{'no_messages' | translate }}</ion-label>
    </div>
    <ion-list *ngIf="!chats">
        <ion-item>
          <ion-avatar class="user-message-img" slot="start">
            <ion-skeleton-text></ion-skeleton-text>
          </ion-avatar>
          <ion-label>
            <ion-skeleton-text animated style="width: 70%; height: 17px;"></ion-skeleton-text>
            <ion-skeleton-text animated style="width: 40%;"></ion-skeleton-text>
          </ion-label>
        </ion-item>
        <ion-item>
          <ion-avatar class="user-message-img" slot="start">
            <ion-skeleton-text></ion-skeleton-text>
          </ion-avatar>
          <ion-label>
            <ion-skeleton-text animated style="width: 70%; height: 17px;"></ion-skeleton-text>
            <ion-skeleton-text animated style="width: 40%;"></ion-skeleton-text>
          </ion-label>
        </ion-item>        <ion-item>
          <ion-avatar class="user-message-img" slot="start">
            <ion-skeleton-text></ion-skeleton-text>
          </ion-avatar>
          <ion-label>
            <ion-skeleton-text animated style="width: 70%; height: 17px;"></ion-skeleton-text>
            <ion-skeleton-text animated style="width: 40%;"></ion-skeleton-text>
          </ion-label>
        </ion-item>
      </ion-list>
        <ion-item *ngFor="let chat of chats" (click)="goToChat(chat, $event)">
            <img 
            class="user-img"
            (load)="loadImg($event)"
            (click)="$event.stopPropagation(); viewProfile(chat.users[0].user.id)"
            onError="this.src='../../assets/imgs/user.svg';"             
            src="{{chat.img}}" />
          <ion-label class="chat-name">
            <h3>{{chat.name}}</h3>
            <p *ngIf="chat.lastMessage" [class.notReadMessage]="chat.lastMessage.readBy.indexOf(user?.id) == -1">{{chat.lastMessage.content}}</p>
          </ion-label>
          <div class="not-read-checker" *ngIf="chat.lastMessage.readBy.indexOf(user?.id) == -1"></div>
        </ion-item>

</ion-content>
